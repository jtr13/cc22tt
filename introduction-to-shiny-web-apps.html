<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 29 Introduction to Shiny Web Apps | Community Contributions for EDAV Fall 2022 Tues/Thurs</title>
<meta name="description" content="Wenxi Zhang (wz2615)  29.1 Motivation Shiny is an R package from R studio that makes it easy to build interactive web apps straight with R. Shiny allows you to create highly effective data reports...">
<meta name="generator" content="bookdown 0.30 with bs4_book()">
<meta property="og:title" content="Chapter 29 Introduction to Shiny Web Apps | Community Contributions for EDAV Fall 2022 Tues/Thurs">
<meta property="og:type" content="book">
<meta property="og:description" content="Wenxi Zhang (wz2615)  29.1 Motivation Shiny is an R package from R studio that makes it easy to build interactive web apps straight with R. Shiny allows you to create highly effective data reports...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 29 Introduction to Shiny Web Apps | Community Contributions for EDAV Fall 2022 Tues/Thurs">
<meta name="twitter:description" content="Wenxi Zhang (wz2615)  29.1 Motivation Shiny is an R package from R studio that makes it easy to build interactive web apps straight with R. Shiny allows you to create highly effective data reports...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.1/transition.js"></script><script src="libs/bs3compat-0.4.1/tabs.js"></script><script src="libs/bs3compat-0.4.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script><script src="libs/plotly-binding-4.10.1/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script><link href="libs/visjs-7.4.9/vis-timeline-graph2d.min.css" rel="stylesheet">
<script src="libs/visjs-7.4.9/vis-timeline-graph2d.min.js"></script><link href="libs/timeline-0.4/timevis.css" rel="stylesheet">
<script src="libs/timevis-binding-2.1.0/timevis.js"></script><link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="libs/leaflet-1.3.1/leaflet.js"></script><link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="libs/proj4-2.6.2/proj4.min.js"></script><script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="libs/leaflet-binding-2.1.1/leaflet.js"></script><link href="libs/dygraphs-1.1.1/dygraph.css" rel="stylesheet">
<script src="libs/dygraphs-1.1.1/dygraph-combined.js"></script><script src="libs/dygraphs-1.1.1/shapes.js"></script><script src="libs/moment-2.8.4/moment.js"></script><script src="libs/moment-timezone-0.2.5/moment-timezone-with-data.js"></script><script src="libs/moment-fquarter-1.0.0/moment-fquarter.min.js"></script><script src="libs/dygraphs-binding-1.1.1.6/dygraphs.js"></script><script src="libs/Dygraph.Plugins.Crosshair-1.0/crosshair.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Community Contributions for EDAV Fall 2022 Tues/Thurs</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Welcome!</a></li>
<li><a class="" href="community-contribution.html"><span class="header-section-number">2</span> Community Contribution</a></li>
<li><a class="" href="github-submission-instructions.html"><span class="header-section-number">3</span> GitHub submission instructions</a></li>
<li><a class="" href="sample-project.html"><span class="header-section-number">4</span> Sample project</a></li>
<li class="book-part">Cheatsheets</li>
<li><a class="" href="r-window-functions-cheatsheet.html"><span class="header-section-number">6</span> R window functions cheatsheet</a></li>
<li><a class="" href="rmd-chunk-option-cheat-sheet.html"><span class="header-section-number">7</span> Rmd chunk option cheat sheet</a></li>
<li><a class="" href="helpful-ggplot2-extensions-cheatsheet.html"><span class="header-section-number">8</span> Helpful ggplot2 Extensions Cheatsheet</a></li>
<li><a class="" href="commonly-used-graph-cheatcheet.html"><span class="header-section-number">9</span> Commonly-used graph cheatcheet</a></li>
<li><a class="" href="git-and-version-control.html"><span class="header-section-number">10</span> Git and version control</a></li>
<li><a class="" href="useful-plots-for-bioinfomatics-in-r.html"><span class="header-section-number">11</span> Useful plots for Bioinfomatics in R</a></li>
<li><a class="" href="different-ways-to-create-world-map-in-r.html"><span class="header-section-number">12</span> Different ways to create world map in R</a></li>
<li><a class="" href="color-in-r-python-and-jshtmlcss.html"><span class="header-section-number">13</span> Color in R, Python, and JS/HTML/CSS</a></li>
<li><a class="" href="color-palettes-for-data-visualization.html"><span class="header-section-number">14</span> Color Palettes for Data Visualization</a></li>
<li><a class="" href="data-visualization-using-seaborn.html"><span class="header-section-number">15</span> Data visualization using Seaborn</a></li>
<li><a class="" href="machine-learning-cheatsheet-for-r-and-python.html"><span class="header-section-number">16</span> Machine Learning Cheatsheet for R and Python</a></li>
<li><a class="" href="data-visualization-with-r-ggplot2-vs.-matlab.html"><span class="header-section-number">17</span> Data Visualization with R ggplot2 vs. Matlab</a></li>
<li><a class="" href="ggplot2-plots-in-python-cheat-sheet-tutorial.html"><span class="header-section-number">18</span> Ggplot2 plots in python cheat sheet tutorial</a></li>
<li><a class="" href="model-evaluation-selection-visualization-with-easystats.html"><span class="header-section-number">19</span> Model evaluation, selection &amp; visualization with easystats</a></li>
<li><a class="" href="time-series-itsmr-cheat-sheet.html"><span class="header-section-number">20</span> Time Series: ITSMR Cheat Sheet</a></li>
<li><a class="" href="introduction.html"><span class="header-section-number">21</span> Introduction:</a></li>
<li><a class="" href="motivation-1.html"><span class="header-section-number">22</span> Motivation:</a></li>
<li class="book-part">Tutorials</li>
<li><a class="" href="preprocessing-and-visualization-of-time-series-data.html"><span class="header-section-number">24</span> Preprocessing and Visualization of Time Series Data</a></li>
<li><a class="" href="how-to-use-sqldf.html"><span class="header-section-number">25</span> How to use sqldf</a></li>
<li><a class="" href="googlevis-in-r.html"><span class="header-section-number">26</span> googleVis in R</a></li>
<li><a class="" href="tutorial-for-vector-fields-in-r.html"><span class="header-section-number">27</span> Tutorial for vector fields in r</a></li>
<li><a class="" href="data-cleaning-with-r.html"><span class="header-section-number">28</span> Data cleaning with r</a></li>
<li><a class="active" href="introduction-to-shiny-web-apps.html"><span class="header-section-number">29</span> Introduction to Shiny Web Apps</a></li>
<li><a class="" href="python-missingno-library-tutorial.html"><span class="header-section-number">30</span> Python missingno library tutorial</a></li>
<li><a class="" href="data-explorer-tutorial-and-automation.html"><span class="header-section-number">31</span> Data Explorer Tutorial and Automation</a></li>
<li><a class="" href="d-visualization-in-r.html"><span class="header-section-number">32</span> 3D Visualization in R</a></li>
<li><a class="" href="visualizing-time-series-data.html"><span class="header-section-number">33</span> Visualizing Time Series Data</a></li>
<li><a class="" href="igraph-in-r.html"><span class="header-section-number">34</span> igraph in r</a></li>
<li><a class="" href="geo-mapping-coordinate-extraction-using-api-calls.html"><span class="header-section-number">35</span> Geo-Mapping Coordinate Extraction Using API Calls</a></li>
<li><a class="" href="edav-garden.html"><span class="header-section-number">36</span> EDAV Garden</a></li>
<li><a class="" href="using-raster-data-in-r.html"><span class="header-section-number">37</span> Using raster data in R</a></li>
<li><a class="" href="make-geographical-maps-with-different-packages.html"><span class="header-section-number">38</span> Make Geographical Maps with Different Packages</a></li>
<li><a class="" href="how-to-obtain-data-from-api-and-process-raw-json-data.html"><span class="header-section-number">39</span> How to obtain data from API and process raw JSON data</a></li>
<li><a class="" href="sample-statistic-tutorial.html"><span class="header-section-number">40</span> Sample Statistic Tutorial</a></li>
<li><a class="" href="data-cleaning-tutorial.html"><span class="header-section-number">41</span> Data cleaning tutorial</a></li>
<li><a class="" href="mlr3-package-tutorial.html"><span class="header-section-number">42</span> mlr3 Package Tutorial</a></li>
<li><a class="" href="guide-to-nonparametric-tests.html"><span class="header-section-number">43</span> Guide to nonparametric tests</a></li>
<li><a class="" href="dplyr-pacakage-in-r.html"><span class="header-section-number">44</span> dplyr pacakage in R</a></li>
<li><a class="" href="how-not-to-visualize-american-elections.html"><span class="header-section-number">45</span> How (not) to visualize American elections</a></li>
<li><a class="" href="time-series-visualization-with-r.html"><span class="header-section-number">46</span> Time series visualization with R</a></li>
<li class="book-part">Interview Prep</li>
<li><a class="" href="ten-interview-questions-and-answers.html"><span class="header-section-number">48</span> Ten interview questions and answers</a></li>
<li><a class="" href="data-science-internship-search-survival-guide.html"><span class="header-section-number">49</span> Data science internship search survival guide</a></li>
<li><a class="" href="data-visualization-interview-questions-sample.html"><span class="header-section-number">50</span> Data visualization interview questions sample</a></li>
<li class="book-part">Case Studies</li>
<li><a class="" href="benford-case-study.html"><span class="header-section-number">52</span> Benford Case Study</a></li>
<li class="book-part">Blogs</li>
<li><a class="" href="equity-in-ai.html"><span class="header-section-number">54</span> Equity in AI</a></li>
<li class="book-part">Appendices</li>
<li><a class="" href="github-initial-setup.html"><span class="header-section-number">55</span> Github initial setup</a></li>
<li><a class="" href="tutorial-for-pull-request-mergers.html"><span class="header-section-number">56</span> Tutorial for pull request mergers</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/jtr13/cc22tt">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="introduction-to-shiny-web-apps" class="section level1" number="29">
<h1>
<span class="header-section-number">29</span> Introduction to Shiny Web Apps<a class="anchor" aria-label="anchor" href="#introduction-to-shiny-web-apps"><i class="fas fa-link"></i></a>
</h1>
<p>Wenxi Zhang (wz2615)</p>
<div id="motivation-3" class="section level2" number="29.1">
<h2>
<span class="header-section-number">29.1</span> Motivation<a class="anchor" aria-label="anchor" href="#motivation-3"><i class="fas fa-link"></i></a>
</h2>
<p>Shiny is an R package from R studio that makes it easy to build interactive web apps straight with R. Shiny allows you to create highly effective data reports and visualization where user can explore the data set by specifying data subset.</p>
<p>I think it is important to address shiny in this tutorial in the following ways:</p>
<ul>
<li><p>Package your analysis in a format that users can easily ingest. As a data scientist, it is common to present work progress within an organization. Shiny makes it easy to deliver data-driven conclusions to users don’t use R or without technical background.</p></li>
<li><p>The <a href="https://shiny.rstudio.com/tutorial/">official tutorial</a> isn’t user friendly for someone first learns shiny. It provides a comprehensive and deep concepts in Shiny and could take too long to finish the whole lessons. Thus here I include some most heavily used functions and concepts in shiny to give viewers a more general and practical exposure to using Shiny.</p></li>
<li><p>Prototyping. Shiny provides a rapid way of prototyping shiny dashboards. As the user interface requirements often changes as a project progress, it is often easier to determine the requirements using a prototype. With Shiny, developers can quickly change and edit Shiny dashboards, as the Shiny framework includes a set of pre-configured functions that generate panels and widgets. When the requirements are settled, we could move from the Shiny app to a formal web development framework.</p></li>
<li><p>Performing daily data analytics task. We can save the R code that does data analytics job in Shiny. For users who have no background in R, they can also perform data manipulation and visualization task. This allows the daily analytics task to move away from data scientists so that they could focus more on the new challenges in business decisions.</p></li>
</ul>
</div>
<div id="how-to-host" class="section level2" number="29.2">
<h2>
<span class="header-section-number">29.2</span> How to host<a class="anchor" aria-label="anchor" href="#how-to-host"><i class="fas fa-link"></i></a>
</h2>
<p>There are multiple way to host a shiny app.</p>
<ul>
<li>Install shiny server on a computer</li>
<li>Upload your app to <a href="https://www.shinyapps.io/" class="uri">https://www.shinyapps.io/</a>
<ul>
<li>Each month you have 25 free active hours</li>
<li>Maximum 5 apps for free</li>
</ul>
</li>
<li>Google Cloud Run: <a href="https://code.markedmondson.me/shiny-cloudrun/" class="uri">https://code.markedmondson.me/shiny-cloudrun/</a>
</li>
</ul>
</div>
<div id="create-your-first-shiny-app" class="section level2" number="29.3">
<h2>
<span class="header-section-number">29.3</span> Create your first Shiny app<a class="anchor" aria-label="anchor" href="#create-your-first-shiny-app"><i class="fas fa-link"></i></a>
</h2>
<p>Here we only focus on creating a Shiny app in Rstudio.
There are several ways to do:</p>
<ul>
<li>File -&gt; New File -&gt; Shiny Web App
<ul>
<li>Single file ( What this tutorial uses)</li>
<li>Multiple files</li>
</ul>
</li>
<li>File -&gt; New File -&gt; R Markdown -&gt; Shiny</li>
<li>File -&gt; New File -&gt; R Markdown -&gt; From Template -&gt; Flex Dashboard</li>
</ul>
</div>
<div id="basic-struture" class="section level2" number="29.4">
<h2>
<span class="header-section-number">29.4</span> Basic Struture<a class="anchor" aria-label="anchor" href="#basic-struture"><i class="fas fa-link"></i></a>
</h2>
<p>Shiny applications are divided into three parts:</p>
<ul>
<li><p>User Interface (UI)</p></li>
<li><p>Server</p></li>
<li><p>a call to the shinyApp function</p></li>
</ul>
<p>The user interface (ui) is responsible for the app presentation, while the server is responsible for the app logic. Finally the <code><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp()</a></code> function creates Shiny app objects from an explicit UI/server pair.</p>
<p>UI controls the lay out of components and what are being displayed on the application page, like text, plots, and widgets that take user input.
The server controls the data being displayed in UI. It’s where you load and wrangle data, transforming input from UI to outputs.</p>
<p>Below is a simple example</p>
<div class="sourceCode" id="cb295"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.rstudio.com/">shiny</a></span><span class="op">)</span></span>
<span><span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidPage</a></span><span class="op">(</span></span>
<span>  <span class="co"># controls the layout and content of the application</span></span>
<span><span class="op">)</span></span>
<span><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span><span class="op">)</span> <span class="op">{</span></span>
<span>   <span class="co"># controls the interaction, modify output based on user input</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#run app</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html">shinyApp</a></span><span class="op">(</span>ui <span class="op">=</span> <span class="va">ui</span>, server <span class="op">=</span> <span class="va">server</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="the-ui" class="section level2" number="29.5">
<h2>
<span class="header-section-number">29.5</span> The UI<a class="anchor" aria-label="anchor" href="#the-ui"><i class="fas fa-link"></i></a>
</h2>
<p>You may lay out the user interface of your app by placing elements in the fluidPage function. Elements can be seperated to inputs and outputs function.</p>
<p>Next we will create a visualization tool to display k-means clustering of Iris dataset. To do this, we need to define the UI panel and return a scatterplot.
Iris data set contains 3 classes of 50 instances each, where each class refers to a type of iris plant. The feature set contains “Sepal.Length”, “Sepal.Width”, “Petal.Length”, “Petal.Width”</p>
<div class="inline-figure"><img src="resources/shiny_app_intro/km.png" style="width:80.0%"></div>
<div id="layout" class="section level3" number="29.5.1">
<h3>
<span class="header-section-number">29.5.1</span> layout<a class="anchor" aria-label="anchor" href="#layout"><i class="fas fa-link"></i></a>
</h3>
<p>First, let’s create the UI panel above on the left side. We will need to define three panels: title, sidebar for users’ input, and main for where all of our visualization work will go.</p>
<p><code>titlePanel</code> and <code>sidebarLayout</code> are two popular elements to create layout.</p>
<p><code>titlePanel</code> is basically where you put the App title in.
<code>sidebarLayout</code> has two arguments: <code>sidebarPanel</code> and <code>mainPanel</code>, which place content at sidebar or main panels as shown below in example1. You can put values like text or input/output functions in the Panels.</p>
<div class="sourceCode" id="cb296"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidPage</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/titlePanel.html">titlePanel</a></span><span class="op">(</span><span class="st">"title panel"</span><span class="op">)</span>,</span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sidebarLayout.html">sidebarLayout</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sidebarLayout.html">sidebarPanel</a></span><span class="op">(</span><span class="st">"sidebar panel"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sidebarLayout.html">mainPanel</a></span><span class="op">(</span><span class="st">"main panel"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="resources/shiny_app_intro/ui1.png" style="width:70.0%"></div>
</div>
<div id="input-functions" class="section level3" number="29.5.2">
<h3>
<span class="header-section-number">29.5.2</span> Input functions<a class="anchor" aria-label="anchor" href="#input-functions"><i class="fas fa-link"></i></a>
</h3>
<p>We can also add control widgets to provide a way for users to send messages to the Shiny app. Shiny widgets collect a value from your user. When a user changes the widget, the value will change as well.There are many input functions to create widgets. Below are some examples of basic widgets.</p>
<div class="inline-figure"><img src="resources/shiny_app_intro/ui2.png" style="width:80.0%"></div>
<p>Next I will introduce a common input function <code><a href="https://rdrr.io/pkg/shiny/man/selectInput.html">selectInput()</a></code> that shows a box with choices to select from.
<code><a href="https://rdrr.io/pkg/shiny/man/selectInput.html">selectInput()</a></code> has 3 required arguments:<br>
inputId: The input name to access the value (for internal ues–&gt; use <code>input$inputId</code> to refer the input value when in server)<br>
label: Label shown in the UI, NULL for no label.<br>
choices: List of values to select from.<br>
We can also use <code>selected</code> to set initial selected value if user not specify.</p>
<div class="sourceCode" id="cb297"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/selectInput.html">selectInput</a></span><span class="op">(</span>inputID<span class="op">=</span><span class="st">'ycol'</span>, label<span class="op">=</span><span class="st">'Y Variable'</span>, </span>
<span>            choices<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span>,<span class="co">#"Sepal.Length" "Sepal.Width"  "Petal.Length" "Petal.Width" </span></span>
<span>      selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="co"># set "Petal.Length" to be default</span></span></code></pre></div>
<div class="inline-figure"><img src="resources/shiny_app_intro/ui3.png" style="width:70.0%"></div>
<p>Here I include the select widget that allows the user to select the y variable of output plot. I also define the variables to choose from are attributes from the feature set, and set the default choice to be ‘Sepal.Width’. Similarly, we can define the selection box for x variable and a numeric Input box that user can define cluster numbers for our clustering example.</p>
</div>
<div id="output-functions" class="section level3" number="29.5.3">
<h3>
<span class="header-section-number">29.5.3</span> Output functions<a class="anchor" aria-label="anchor" href="#output-functions"><i class="fas fa-link"></i></a>
</h3>
<p>To display output, we add output function to <code><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidPage()</a></code> with an <code>*Output()</code> function. Below is a list of output functions that turn R objects into a specific type of output</p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="left">Output</th>
<th>function Creates</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">dataTableOutput</td>
<td>DataTable</td>
</tr>
<tr class="even">
<td align="left">htmlOutput</td>
<td>raw HTML</td>
</tr>
<tr class="odd">
<td align="left">imageOutput</td>
<td>image</td>
</tr>
<tr class="even">
<td align="left">plotOutput</td>
<td>plot</td>
</tr>
<tr class="odd">
<td align="left">tableOutput</td>
<td>table</td>
</tr>
<tr class="even">
<td align="left">textOutput</td>
<td>text</td>
</tr>
<tr class="odd">
<td align="left">uiOutput</td>
<td>raw HTML</td>
</tr>
<tr class="even">
<td align="left">verbatimTextOutput</td>
<td>text</td>
</tr>
</tbody>
</table></div>
<p>Just like other elements in ui, we can add output to the user interface inside <code>sidebarPanel</code> or <code>mainPanel</code>.
In our example, we place the output in the <code>mainPanel</code> and the output is a scatter plot with user defined x, y variables. We may add <code>plotOutput('plot')</code> to the <code>mainPanel</code> to create the plot object, where <code>"plot"</code> is the name given to the output plot. <code><a href="https://rdrr.io/pkg/shiny/man/numericInput.html">numericInput()</a></code> is used for choosing cluster numbers, users are allowed to enter cluster numbers from 1 to 9, with the default of 3 clusters.</p>
<p>Below is the complete ui portion for our Iris clustering problem.</p>
<div class="sourceCode" id="cb298"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html">fluidPage</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/headerPanel.html">headerPanel</a></span><span class="op">(</span><span class="st">'Iris k-means clustering'</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sidebarLayout.html">sidebarPanel</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/selectInput.html">selectInput</a></span><span class="op">(</span><span class="st">'xcol'</span>, <span class="st">'X Variable'</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/selectInput.html">selectInput</a></span><span class="op">(</span><span class="st">'ycol'</span>, <span class="st">'Y Variable'</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span>,</span>
<span>                selected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/numericInput.html">numericInput</a></span><span class="op">(</span><span class="st">'clusters'</span>, <span class="st">'Cluster count'</span>, value<span class="op">=</span><span class="fl">3</span>,<span class="co">#value: initial value</span></span>
<span>                 min <span class="op">=</span> <span class="fl">1</span>, max <span class="op">=</span> <span class="fl">9</span><span class="op">)</span><span class="co">#Minimum allowed value, Maximum allowed value</span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sidebarLayout.html">mainPanel</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/plotOutput.html">plotOutput</a></span><span class="op">(</span><span class="st">'plot'</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div id="the-server" class="section level2" number="29.6">
<h2>
<span class="header-section-number">29.6</span> The Server<a class="anchor" aria-label="anchor" href="#the-server"><i class="fas fa-link"></i></a>
</h2>
<p>After adding the output object in ui, we need to tell Shiny how to build the object in the server function. To do this, we need to</p>
<ol style="list-style-type: decimal">
<li><p>Access input values with <code>input$</code> (In our example, we have <code>input$xcol</code>, <code>input$ycol</code>, <code>input$clusters</code>)</p></li>
<li><p>builds a list-like object named <code>output</code> that contains all of the code needed to update the R objects in the app. (Save objects to display to <code>output$</code>. In our case output is <code>output$plot</code>)</p></li>
<li><p>Define text/charts/plots in the server function (Build objects to display with <code>render*()</code>)</p></li>
</ol>
<p>Each entry to output should contain the output of one of Shiny’s <code>render*</code> functions. These functions capture an R expression and do some light pre-processing on the expression. <code>render*()</code> function creates the type of output you wish to make. Shiny will re-run the function every time it needs to update your object.<br>
Below are some common render functions and their descriptions.</p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="left">render function</th>
<th align="center">creates</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">renderDataTable</td>
<td align="center">DataTable</td>
</tr>
<tr class="even">
<td align="left">renderImage</td>
<td align="center">images (saved as a link to a source file)</td>
</tr>
<tr class="odd">
<td align="left">renderPlot</td>
<td align="center">plots</td>
</tr>
<tr class="even">
<td align="left">renderPrint</td>
<td align="center">any printed output</td>
</tr>
<tr class="odd">
<td align="left">renderTable</td>
<td align="center">data frame, matrix, other table like structures</td>
</tr>
<tr class="even">
<td align="left">renderText</td>
<td align="center">character strings</td>
</tr>
<tr class="odd">
<td align="left">renderUI</td>
<td align="center">a Shiny tag object or HTML</td>
</tr>
</tbody>
</table></div>
<p>By following the rules above, reactivity automatically occurs whenever you use an input value to build rendered Outputs.</p>
<div id="reactivity" class="section level3" number="29.6.1">
<h3>
<span class="header-section-number">29.6.1</span> Reactivity<a class="anchor" aria-label="anchor" href="#reactivity"><i class="fas fa-link"></i></a>
</h3>
<p>We know that the input value changes whenever a user changes the input. The input values notify <code>render*</code> functions and R expression inside the <code>render*()</code> when input changes. When notified that input changes, the object created by a <code>render*()</code> function will return the entire code block to update itself.</p>
<p>However, it could be computational costy if we update all R expression inside the <code>render*()</code> whenever an input updates. For example, if we want to use the same modified input several times, the duplicate R expressions for modifying input could slows the program. Thus it is better to save the reusable R expressions that modifies input to a function. Luckily, <code><a href="https://rdrr.io/pkg/shiny/man/reactive.html">reactive()</a></code> function in shiny does this job!</p>
<p><code><a href="https://rdrr.io/pkg/shiny/man/reactive.html">reactive()</a></code> builds a reactive object that will respond to every input value in the code. We can save the R expressions what modifies input values in <code><a href="https://rdrr.io/pkg/shiny/man/reactive.html">reactive()</a></code> and call the reactive expression like a function.</p>
<p>In our example, we can save the user specified two feature columns of Iris dataset as <code>selectedData</code> and calculate k-mans model <code>clusters</code> base on <code>selectedData</code> and user specified cluster numbers.
Moreover, <code>selectedData</code> won’t change if <code>input$xcol</code> and <code>input$ycol</code> aren’t changed. We can avoid unnecessary computation by not putting all expressions in the final <code>render*()</code> function, so that we don’t need to update <code>iris[, c(input$xcol, input$ycol)]</code> whenever <code>input$clusters</code> changes.</p>
<div class="sourceCode" id="cb299"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="va">selectedData</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html">reactive</a></span><span class="op">(</span><span class="op">{</span></span>
<span>    <span class="va">iris</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">xcol</span>, <span class="va">input</span><span class="op">$</span><span class="va">ycol</span><span class="op">)</span><span class="op">]</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span>  <span class="va">clusters</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html">reactive</a></span><span class="op">(</span><span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/stats/kmeans.html">kmeans</a></span><span class="op">(</span><span class="fu">selectedData</span><span class="op">(</span><span class="op">)</span>, <span class="va">input</span><span class="op">$</span><span class="va">clusters</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="display-output-with-render" class="section level3" number="29.6.2">
<h3>
<span class="header-section-number">29.6.2</span> Display output with render*()<a class="anchor" aria-label="anchor" href="#display-output-with-render"><i class="fas fa-link"></i></a>
</h3>
<p>In our example, we need to define a plot as output. Thus we use the render function <code><a href="https://rdrr.io/pkg/shiny/man/renderPlot.html">renderPlot()</a></code> here.</p>
<p>As discussed before, <code><a href="https://rdrr.io/pkg/shiny/man/renderPlot.html">renderPlot()</a></code> will respond to every reactive value in the code, which are <code>selectedData()</code> and <code>clusters()</code>. We use these two functions as the input data in <code><a href="https://rdrr.io/pkg/shiny/man/renderPlot.html">renderPlot()</a></code>. When any of the two functions change, <code><a href="https://rdrr.io/pkg/shiny/man/renderPlot.html">renderPlot()</a></code> will rerun the r expressions inside.</p>
<div class="sourceCode" id="cb300"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="va">output</span><span class="op">$</span><span class="va">plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/renderPlot.html">renderPlot</a></span><span class="op">(</span><span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5.1</span>, <span class="fl">4.1</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="fu">selectedData</span><span class="op">(</span><span class="op">)</span>,</span>
<span>         col <span class="op">=</span> <span class="fu">clusters</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">cluster</span>,</span>
<span>         pch <span class="op">=</span> <span class="fl">20</span>, cex <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/graphics/points.html">points</a></span><span class="op">(</span><span class="fu">clusters</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">centers</span>, pch <span class="op">=</span> <span class="fl">4</span>, cex <span class="op">=</span> <span class="fl">4</span>, lwd <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p>Now everything is connected! The overall server section looks like below. Finally, we need one more statement to have our app running –&gt;<code>shinyApp(ui = ui, server = server)</code></p>
<div class="sourceCode" id="cb301"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span><span class="op">)</span> <span class="op">{</span></span>
<span></span>
<span>  <span class="va">selectedData</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html">reactive</a></span><span class="op">(</span><span class="op">{</span></span>
<span>    <span class="va">iris</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">xcol</span>, <span class="va">input</span><span class="op">$</span><span class="va">ycol</span><span class="op">)</span><span class="op">]</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span>  <span class="va">clusters</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html">reactive</a></span><span class="op">(</span><span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/stats/kmeans.html">kmeans</a></span><span class="op">(</span><span class="fu">selectedData</span><span class="op">(</span><span class="op">)</span>, <span class="va">input</span><span class="op">$</span><span class="va">clusters</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span>  <span class="va">output</span><span class="op">$</span><span class="va">plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/renderPlot.html">renderPlot</a></span><span class="op">(</span><span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5.1</span>, <span class="fl">4.1</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="fu">selectedData</span><span class="op">(</span><span class="op">)</span>,</span>
<span>         col <span class="op">=</span> <span class="fu">clusters</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">cluster</span>,</span>
<span>         pch <span class="op">=</span> <span class="fl">20</span>, cex <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/graphics/points.html">points</a></span><span class="op">(</span><span class="fu">clusters</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">centers</span>, pch <span class="op">=</span> <span class="fl">4</span>, cex <span class="op">=</span> <span class="fl">4</span>, lwd <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
</div>
<div id="conclusion-3" class="section level2" number="29.7">
<h2>
<span class="header-section-number">29.7</span> Conclusion<a class="anchor" aria-label="anchor" href="#conclusion-3"><i class="fas fa-link"></i></a>
</h2>
<p>In general, Shiny is a great option to presenting results combining with the visualization tool using R expressions. Though the example we went through, we have covered the basic structure of Shiny, how to manipulate the layout of UI, and how to connect the logic behind input s and outputs in the server function.</p>
<p>Functions introduced above are some most used functions in shiny. There are more powerful and interesting aspects of shiny app like customizing appearance and other internal functions. I highly recommend you to visit <a href="https://shiny.rstudio.com/" class="uri">https://shiny.rstudio.com/</a> for the documentation and gallery.</p>
</div>
<div id="evaluation" class="section level2" number="29.8">
<h2>
<span class="header-section-number">29.8</span> Evaluation<a class="anchor" aria-label="anchor" href="#evaluation"><i class="fas fa-link"></i></a>
</h2>
<p>During my experience of dive deep into learning shiny and experimenting with different data sets, I find shiny is a powerful and easy to learn package that generate intuitive interactive web apps, especially for the interactive plots. If you want to report an ongoing project, shiny would be a great tool for visualizing the impact of your work. Just like in our example here of visualizing k-means clusters, it gives users a more intuitive way of understanding k-means clustering.</p>
<p>I also learnt that Shiny has unlimited possibilities of improving efficiency of our work, from creating interactive presentations on project result to solving daily analytic task. Moreover, Shiny enables users who have no R background to do data analyzing work, by manipulating the widgets in the UI.</p>
<p>Things I might do differently next time would be including more complex and useful internal functions for the server part, and customizing appearance of Shiny’s UI components using differnt themes.</p>
</div>
<div id="reference-2" class="section level2" number="29.9">
<h2>
<span class="header-section-number">29.9</span> Reference<a class="anchor" aria-label="anchor" href="#reference-2"><i class="fas fa-link"></i></a>
</h2>
<p><a href="https://towardsdatascience.com/beginners-guide-to-creating-an-r-shiny-app-1664387d95b3" class="uri">https://towardsdatascience.com/beginners-guide-to-creating-an-r-shiny-app-1664387d95b3</a></p>
<p><a href="https://shiny.rstudio.com/tutorial/" class="uri">https://shiny.rstudio.com/tutorial/</a></p>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="data-cleaning-with-r.html"><span class="header-section-number">28</span> Data cleaning with r</a></div>
<div class="next"><a href="python-missingno-library-tutorial.html"><span class="header-section-number">30</span> Python missingno library tutorial</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#introduction-to-shiny-web-apps"><span class="header-section-number">29</span> Introduction to Shiny Web Apps</a></li>
<li><a class="nav-link" href="#motivation-3"><span class="header-section-number">29.1</span> Motivation</a></li>
<li><a class="nav-link" href="#how-to-host"><span class="header-section-number">29.2</span> How to host</a></li>
<li><a class="nav-link" href="#create-your-first-shiny-app"><span class="header-section-number">29.3</span> Create your first Shiny app</a></li>
<li><a class="nav-link" href="#basic-struture"><span class="header-section-number">29.4</span> Basic Struture</a></li>
<li>
<a class="nav-link" href="#the-ui"><span class="header-section-number">29.5</span> The UI</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#layout"><span class="header-section-number">29.5.1</span> layout</a></li>
<li><a class="nav-link" href="#input-functions"><span class="header-section-number">29.5.2</span> Input functions</a></li>
<li><a class="nav-link" href="#output-functions"><span class="header-section-number">29.5.3</span> Output functions</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#the-server"><span class="header-section-number">29.6</span> The Server</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#reactivity"><span class="header-section-number">29.6.1</span> Reactivity</a></li>
<li><a class="nav-link" href="#display-output-with-render"><span class="header-section-number">29.6.2</span> Display output with render*()</a></li>
</ul>
</li>
<li><a class="nav-link" href="#conclusion-3"><span class="header-section-number">29.7</span> Conclusion</a></li>
<li><a class="nav-link" href="#evaluation"><span class="header-section-number">29.8</span> Evaluation</a></li>
<li><a class="nav-link" href="#reference-2"><span class="header-section-number">29.9</span> Reference</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/jtr13/cc22tt/blob/main/shiny_app_intro.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/jtr13/cc22tt/edit/main/shiny_app_intro.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Community Contributions for EDAV Fall 2022 Tues/Thurs</strong>" was written by . It was last built on 2022-11-17.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
